<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permanent ID Label Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
</head>
<body>
    <main class="layout">
        <section class="panel controls">
            <h1>Label Settings</h1>
            <form id="labelForm">
                <fieldset>
                    <legend>Project</legend>
                    <label>
                        Project Name
                        <input type="text" id="projectName" placeholder="Untitled Project">
                    </label>
                    <div class="label-list-header">
                        <span>Labels</span>
                        <button type="button" id="addLabelBtn" class="button secondary">Add Label</button>
                    </div>
                    <ul id="labelList" class="label-list" role="listbox" aria-label="Labels in project"></ul>
                    <div class="label-actions-inline">
                        <button type="button" id="duplicateLabelBtn" class="button secondary" disabled>Duplicate</button>
                        <button type="button" id="removeLabelBtn" class="button" disabled>Remove</button>
                    </div>
                    <div class="project-actions">
                        <button type="button" id="saveProjectBtn" class="button">Save Project</button>
                        <button type="button" id="openProjectBtn" class="button secondary">Open Project</button>
                        <input type="file" id="projectFileInput" accept="application/json" hidden>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Label Dimensions</legend>
                    <label>
                        Label Name
                        <input type="text" id="labelName" placeholder="Label name">
                    </label>
                    <label>
                        Width (mm)
                        <input type="number" id="labelWidth" min="10" step="1" value="100" required>
                    </label>
                    <label>
                        Height (mm)
                        <input type="number" id="labelHeight" min="10" step="1" value="50" required>
                    </label>
                    <label>
                        Corner Radius (mm)
                        <input type="number" id="cornerRadius" min="0" step="0.5" value="4">
                    </label>
                    <label>
                        Border Thickness (mm)
                        <input type="number" id="borderThickness" min="0" step="0.1" value="0.5">
                    </label>
                    <label class="checkbox-option">
                        <span>Auto Border</span>
                        <input type="checkbox" id="autoBorder">
                    </label>
                    <label>
                        Auto Padding (mm)
                        <input type="number" id="autoPadding" min="0" step="0.1" value="2">
                    </label>
                    <label>
                        Canvas Margin (mm)
                        <input type="number" id="canvasMargin" min="0" step="0.1" value="0.2">
                    </label>
                    <label>
                        Background Color
                        <input type="color" id="backgroundColor" value="#f2f2f2">
                    </label>
                    <label>
                        Text Color
                        <input type="color" id="textColor" value="#000000">
                    </label>
                </fieldset>

                <fieldset>
                    <legend>Text Lines</legend>
                    <div class="stack-row">
                        <label>
                            Line Spacing (mm)
                            <input type="number" id="lineSpacing" min="0" step="0.5" value="3">
                        </label>
                        <label>
                            Letter Spacing (mm)
                            <input type="number" id="letterSpacing" min="0" step="0.1" value="0">
                        </label>
                    </div>
                    <div id="linesContainer" class="lines"></div>
                    <button type="button" id="addLineBtn" class="button secondary">Add Line</button>
                </fieldset>

                <div class="actions">
                    <button type="button" id="exportSvgBtn" class="button primary">Export SVG</button>
                    <button type="reset" class="button">Reset</button>
                </div>
            </form>
        </section>

        <section class="panel preview">
            <h2>Preview</h2>
            <div class="preview-toolbar">
                <button type="button" id="toggleDisplaySettingsBtn" class="button secondary">Display & CNC Settings</button>
            </div>
            <div id="displaySettingsPanel" class="display-settings" hidden>
                <h3>Display Calibration</h3>
                <p>Hold a standard credit card against the guide and adjust until it matches (85.6 Ã— 53.98 mm).</p>
                <div id="creditCardGuide" class="credit-card-guide" aria-label="Credit card size guide"></div>
                <label>
                    Screen Scale (%)
                    <input type="number" id="screenScalePercent" min="50" max="250" step="0.5" value="100">
                </label>
                <button type="button" id="resetScreenScaleBtn" class="button secondary">Reset Scale</button>

                <h3>CNC Export</h3>
                <label class="checkbox-option">
                    <span>Export toolpath-friendly strokes</span>
                    <input type="checkbox" id="toolpathFriendly">
                </label>
                <p class="scale-note">When enabled, export uses no fills and applies strokes for easier CAM path extraction.</p>
            </div>
            <div id="previewContainer" class="preview-canvas" aria-live="polite"></div>
            <p class="scale-note">Preview scale can be calibrated to your display using a credit card.</p>
        </section>
    </main>
    <script src="script.js" defer></script>
</body>
</html>
